---
title: "testcolormap.Rmd"
author: "Daniel"
date: "10/30/2024"
output: html_document
---

```{r}
# Load 
library(leaflet)
library(stringr)
library(dplyr)
library(tidyverse)
library(shiny)




# Read data

bikecolors <- read.csv("bike_numbers.csv")


bikecolors$color[bikecolors$num_bikes_available <= 5] <- "red"
bikecolors$color[bikecolors$num_bikes_available > 5 & bikecolors$num_bikes_available <= 15] <- "orange"
bikecolors$color[bikecolors$num_bikes_available > 15] <- "green"


bikeinfo <- sapply(1:nrow(bikecolors), function(x) {

  paste(p(HTML(paste(strong("Station Info:"), p(bikecolors$name[x]), p(bikecolors$longitude[x], bikecolors$latitude[x]),
                      p(bikecolors$num_bikes_available[x]))))



         )
})





leaflet(data = bikecolors) %>%
  addTiles() %>%
  addProviderTiles(provider = providers$Esri.WorldImagery, group = "Satellite") %>%
  addTiles(group = "Street") %>%
  addCircleMarkers(popup = ~bikeinfo, lng = ~longitude, lat = ~latitude, group = "Markers", color = ~color, 
                   radius = ~num_bikes_available) %>%
  addLayersControl(baseGroups = c("Streets", "Satellite"), overlayGroups = c("Markers"),
                   position = "topright")
        

```

